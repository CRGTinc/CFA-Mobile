/*c03607cf1bd1fca83b35640ac3eff2715755e6b4*/Ext.define("cfa.profile.Tablet",{extend:"Ext.app.Profile",config:{name:"tablet",namespace:"tablet",controllers:["Dashboard","cfa.controller.Master","cfa.controller.case.CaseController","cfa.controller.contact.ContactController","cfa.controller.event.EventController","cfa.controller.reference.ReferenceController","cfa.controller.report.ReportController","cfa.controller.setting.SettingController"],views:["Main"]},isActive:function(){return !Ext.os.is.Phone},launch:function(){Ext.create("cfa.view.tablet.Main")}});Ext.define("cfa.profile.Phone",{extend:"Ext.app.Profile",config:{name:"phone",namespace:"phone",controllers:["Dashboard","cfa.controller.Master"],views:["Main"]},isActive:function(){return Ext.os.is.Phone},launch:function(){Ext.create("cfa.view.phone.Main")}});Ext.define("cfa.controller.Master",{extend:"Ext.app.Controller",config:{refs:{main:"main",aboutbtn:"#about-btn",basicbtn:"#basic-btn",fedbtn:"#fed-btn"},control:{aboutbtn:{tap:"goToAbout"},basicbtn:{tap:"goToBasic"},fedbtn:{tap:"goToFed"},}},goToAbout:function(){this.getMain().push({title:"About Page",html:'<font color="white">About Page</font>'})},goToBasic:function(){this.getMain().push({title:"Basics Help Pag",html:'<font color="white">Basics Help Page</font>'})},goToFed:function(){this.getMain().push({title:"Feedback Page",html:'<font color="white">Feedback Page</font>'})},});Ext.define("cfa.model.Dashboard",{extend:"Ext.data.Model",config:{fields:["urlId","label"]},toUrl:function(){return this.get("urlId")}});Ext.define("cfa.controller.Dashboard",{extend:"Ext.app.Controller",config:{refs:{main:"main",homebtn:"#home-btn"},before:{showRootDashboard:"ensureStoreLoad",showDashboardById:"ensureStoreLoad"},control:{main:{beforepop:"onMainBeforePop"},dashboards:{itemtap:"onDashboardTap"},homebtn:{tap:"goHome"},},routes:{"":"showRootDashboard"},currentRecord:null,stack:[]},init:function(){Ext.getStore("Dashboards").on("load",this.onStoreLoad,this)},ensureStoreLoad:function(b){var a=Ext.getStore("Dashboards");if(a.data.all.length){b.resume()}else{a.on("load",function(){b.resume()},this,{single:true})}},onMainBeforePop:function(){},showRootDashboard:function(){var a=this.getStack();if(a.length){this.getMain().pop();return}this.setStack([]);var c=Ext.getStore("Dashboards"),b=c.getRoot();this.addPreviousViews(b);this.showDashboard(b)},onDashboardTap:function(b,c,f,a,d){this.redirectTo(a)},addPreviousViews:function(d){var h=[],b=this.getMain(),e=b.getLayout(),a=e.getAnimation(),g=this.getStack(),f,c,j;if(b.getInnerItems().length){return}while((d=d.parentNode)){h.unshift(d)}e.setAnimation(false);f=h.length;for(c=0;c<f;c++){j=h[c].get("urlId");if(j){g.push(j)}this.showDashboard(h[c])}this.setStack(g);setTimeout(function(){e.setAnimation(a)},50)},showDashboard:function(b){var c=(b.get("id")=="root"),a;if(c){b.set("label","Dashboards")}this.setCurrentRecord(b);a=this.getDashboardsView({title:b.get("label"),cls:(c)?"root":null,data:b.childNodes});this.getMain().setActiveItem(a)},getDashboardsView:function(a){return Ext.create("cfa.view.Dashboards",a)},goHome:function(){this.showRootDashboard()}});Ext.define("cfa.view.case.CaseView",{extend:"Ext.Panel",xtype:"case",config:{items:[{html:'<font color="white">This is cases page</font>'}]}});Ext.define("cfa.view.event.EventView",{extend:"Ext.Panel",xtype:"event",config:{items:[{html:'<font color="white">This is events page</font>'}]}});Ext.define("cfa.view.reference.ReferenceView",{extend:"Ext.Panel",xtype:"reference",config:{items:[{html:'<font color="white">This is references page</font>'}]}});Ext.define("cfa.view.report.ReportView",{extend:"Ext.Panel",xtype:"report",config:{items:[{html:'<font color="white">This is reports page</font>'}]}});Ext.define("cfa.view.setting.SettingView",{extend:"Ext.Panel",xtype:"setting",config:{items:[{html:'<font color="white">This is settings page</font>'}]}});Ext.define("cfa.view.Dashboards",{extend:"Ext.dataview.DataView",xtype:"dashboards",config:{refs:{main:"main"},baseCls:"dashboards-list",itemTpl:['<div class="image" style="background-image:url(resources/icons/{urlId}.png)"></div>','<div class="name">{label}</div>'].join(""),records:null},applyData:function(a){this.setRecords(a);return Ext.pluck(a||[],"data")},onItemTap:function(b,i,f,h){var g=this,d=g.getStore(),c=g.getRecords(),a=d&&c[f];g.fireEvent("itemtap",g,f,i,a,h)}});Ext.define("cfa.view.contact.HTMLPanel",{extend:"Ext.Panel",requires:["Ext.Ajax"],config:{listeners:{activate:"onActivate"},url:null},onActivate:function(b,a){console.log("Ajax calling");Ext.Ajax.request({url:this.getUrl(),method:"GET",disableCaching:false,success:function(c,d){b.setHtml(c.responseText)},failure:function(c,d){if(c.status==0&&c.responseText!=""){b.setHtml(c.responseText)}else{console.log("Load HTML View failed");b.setHtml("<font color='white'> Offline Mode</font>")}}})}});Ext.define("cfa.store.Dashboards",{extend:"Ext.data.TreeStore",requires:["cfa.model.Dashboard"],config:{model:"cfa.model.Dashboard",autoLoad:true,root:{expanded:true},data:[{label:"Cases",urlId:"case"},{label:"Contacts",urlId:"contact"},{label:"Events",urlId:"event"},{label:"References",urlId:"reference"},{label:"Reports",urlId:"report"},{label:"Settings",urlId:"setting"}]}});Ext.define("cfa.controller.tablet.Dashboard",{extend:"cfa.controller.Dashboard",config:{},init:function(){this.callParent()},});Ext.define("cfa.controller.case.CaseController",{extend:"Ext.app.Controller",requires:["cfa.view.case.CaseView"],config:{routes:{"case":"showCasePage"},refs:{main:"main"}},showCasePage:function(){console.log("Go to cases page");var a=Ext.create("cfa.view.case.CaseView");this.getMain().push(a)}});Ext.define("cfa.controller.event.EventController",{extend:"Ext.app.Controller",requires:["cfa.view.event.EventView"],config:{routes:{event:"showEventPage"},refs:{main:"main"}},showEventPage:function(){console.log("Go to events page");var a=Ext.create("cfa.view.event.EventView");this.getMain().push(a)}});Ext.define("cfa.controller.reference.ReferenceController",{extend:"Ext.app.Controller",requires:["cfa.view.reference.ReferenceView"],config:{routes:{reference:"showReferencePage"},refs:{main:"main"}},showReferencePage:function(){console.log("Go to references page");var a=Ext.create("cfa.view.reference.ReferenceView");this.getMain().push(a)}});Ext.define("cfa.controller.report.ReportController",{extend:"Ext.app.Controller",requires:["cfa.view.report.ReportView"],config:{routes:{report:"showReferencePage"},refs:{main:"main"}},showReferencePage:function(){console.log("Go to report page");var a=Ext.create("cfa.view.report.ReportView");this.getMain().push(a)}});Ext.define("cfa.controller.setting.SettingController",{extend:"Ext.app.Controller",requires:["cfa.view.setting.SettingView"],config:{routes:{setting:"showSettingPage"},refs:{main:"main"}},showSettingPage:function(){console.log("Go to setting page");var a=Ext.create("cfa.view.setting.SettingView");this.getMain().push(a)}});Ext.define("cfa.controller.phone.Dashboard",{extend:"cfa.controller.Dashboard",config:{},init:function(){this.callParent()}});Ext.define("cfa.view.Main",{extend:"Ext.navigation.View",xtype:"main",requires:["cfa.view.Dashboards"],config:{items:[{xtype:"panel",id:"container"}],fullscreen:true,autoDestroy:false,navigationBar:{backButton:{iconCls:"back"},items:[{xtype:"button",text:"Home",ui:"action",id:"home-btn"},{xtype:"button",text:"Basics help",ui:"action",id:"basic-btn"},{xtype:"button",text:"Feedback",ui:"action",id:"fed-btn"},{xtype:"button",text:"About pages",ui:"action",id:"about-btn"}]}},pop:function(){this.fireEvent("beforepop",this);this.callParent(arguments)}});Ext.define("cfa.view.tablet.Main",{extend:"cfa.view.Main",config:{useTitleForBackButtonText:true}});Ext.define("cfa.view.phone.Main",{extend:"cfa.view.Main",requires:[]});Ext.define("cfa.view.contact.ContactView",{extend:"cfa.view.contact.HTMLPanel",xtype:"contact",config:{scrollable:"vertical",url:"contact.html"}});Ext.define("cfa.controller.contact.ContactController",{extend:"Ext.app.Controller",requires:["cfa.view.contact.ContactView"],config:{routes:{contact:"showContactPage"},refs:{main:"main"}},showContactPage:function(){console.log("Go to contacts page");var a=Ext.create("cfa.view.contact.ContactView");this.getMain().push(a)}});Ext.application({name:"cfa",profiles:["Tablet","Phone"],stores:["Dashboards"],requires:["Ext.MessageBox"],icon:{"57":"resources/icons/Icon.png","72":"resources/icons/Icon~ipad.png","114":"resources/icons/Icon@2x.png","144":"resources/icons/Icon~ipad@2x.png"},isIconPrecomposed:true,startupImage:{"320x460":"resources/startup/320x460.jpg","640x920":"resources/startup/640x920.png","768x1004":"resources/startup/768x1004.png","748x1024":"resources/startup/748x1024.png","1536x2008":"resources/startup/1536x2008.png","1496x2048":"resources/startup/1496x2048.png"},launch:function(){Ext.fly("appLoadingIndicator").destroy()},onUpdated:function(){Ext.Msg.confirm("Application Update","This application has just successfully been updated to the latest version. Reload now?",function(a){if(a==="yes"){window.location.reload()}})}});